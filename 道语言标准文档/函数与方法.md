# 函数与方法

## 一、函数定义

### 1. 基本函数
```go
// 基本函数定义
术 加(甲 整, 乙 整) 整 {
    还 甲 + 乙
}

// 无参数函数
术 问好() {
    示("你好")
}

// 多返回值函数
术 除(甲 整, 乙 整) (整, 误) {
    若 乙 == 0 {
        还 0, 新误("除数不能为零")
    }
    还 甲 / 乙, 空
}
```

### 2. 变参函数
```go
// 变参函数定义
术 求和(数 ...整) 整 {
    和 := 0
    历 数 值 {
        和 += 值
    }
    还 和
}

// 变参函数使用
和 := 求和(1, 2, 3, 4, 5)
```

### 3. 命名返回值
```go
术 矩形(长 浮, 宽 浮) (面积 浮, 周长 浮) {
    面积 = 长 * 宽
    周长 = 2 * (长 + 宽)
    还
}
```

## 二、方法定义

### 1. 值接收者方法
```go
体 圆 {
    径 浮
}

术 (圆 圆) 面() 浮 {
    还 3.14159 * 圆.径 * 圆.径
}

// 使用方法
圆实 := 圆{径: 5}
面积 := 圆实.面()
```

### 2. 指针接收者方法
```go
体 计数 {
    值 整
}

术 (数 *计数) 增() {
    数.值++
}

// 使用方法
计数实 := 计数{值: 0}
计数实.增()
```

## 三、闭包

### 1. 基本闭包
```go
术 计数器() 术() 整 {
    数 := 0
    还 术() 整 {
        数++
        还 数
    }
}

// 使用闭包
数器 := 计数器()
示(数器())  // 1
示(数器())  // 2
```

### 2. 带参数闭包
```go
术 加法器(基数 整) 术(整) 整 {
    还 术(数 整) 整 {
        还 基数 + 数
    }
}

// 使用带参数闭包
加十 := 加法器(10)
示(加十(5))  // 15
```

## 四、延迟执行

### 1. 基本延迟
```go
术 示例() {
    延 示("最后执行")
    示("先执行")
}
```

### 2. 多延迟执行
```go
术 文件操作() {
    文件 := 开("文件.txt")
    延 文件.关闭()
    延 示("文件已关闭")
    
    // 文件操作代码
}
```

## 五、函数类型

### 1. 函数类型定义
```go
型 运算 术(整, 整) 整

// 函数类型使用
术 计算(甲 整, 乙 整, 算 运算) 整 {
    还 算(甲, 乙)
}

// 实现函数
术 加(甲 整, 乙 整) 整 {
    还 甲 + 乙
}

// 使用函数类型
结果 := 计算(10, 20, 加)
```

### 2. 匿名函数
```go
// 直接定义并调用
结果 := 术(甲 整, 乙 整) 整 {
    还 甲 * 乙
}(10, 20)

// 赋值给变量
乘法 := 术(甲 整, 乙 整) 整 {
    还 甲 * 乙
}
```

## 六、泛型函数

### 1. 基本泛型
```go
术 交换[类 泛型](甲 类, 乙 类) (类, 类) {
    还 乙, 甲
}

// 使用泛型函数
整甲, 整乙 := 交换(1, 2)
串甲, 串乙 := 交换("你好", "世界")
```

### 2. 带约束泛型
```go
衔 数值 {
    整 | 浮32 | 浮64
}

术 最大值[类 数值](甲 类, 乙 类) 类 {
    若 甲 > 乙 {
        还 甲
    }
    还 乙
}
``` 